{% extends 'base.html' %}


{% block content %}


{% if user.is_authenticated %}

	<h1>Tickets</h1>

	<a href="{% url 'add_ticket' %}" class="btn btn-primary">Add Ticket</a>
	<br>
	<br>

	<table class="table table-striped table-hover">
		<thead class="table-light">
			<tr>
				<th scope="col">id</th>
				<th scope="col">Title</th>
				<th scope="col">Description</th>
				<th scope="col">Status</th>
				<th scope="col">Priority</th>
				<th scope="col">Notes</th>
				<th scope="col">Created At</th>
				<th scope="col">Last updated</th>
			</tr>
		</thead>
		<tbody>	
			 
			{% if tickets %}

				{% for ticket in tickets %}
					<tr>
						<td><a href="{% url 'ticket' ticket.id %}">{{ ticket.id }}</a></td>
						<td>{{ ticket.title }}</td>
						<td>{{ ticket.description|truncatechars:50 }}</td>
						<td>{{ ticket.status }}</td>
						<td>{{ ticket.priority }}</td>
						<td>{{ ticket.notes|truncatechars:50 }}</td>
						<td>{{ ticket.created_at }}</td>
						<td>{{ ticket.last_updated }}</td>
					</tr>
				{% endfor %}

			{% endif %}
			
		</tbody>
	</table>


{% endif %}

{% endblock %}